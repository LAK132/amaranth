<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Including External non-Torii Modules &mdash; Torii-HDL 0.1.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b20cc3f5" />
      <link rel="stylesheet" type="text/css" href="../_static/css/styles.css?v=e585626c" />
      <link rel="stylesheet" type="text/css" href="../_static/platformpicker.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/styles.css?v=e585626c" />

  
    <link rel="canonical" href="https://torii.shmdn.link/tutorials/external_modules.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=4b1cca27"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/platformpicker.js"></script>
        <script src="../_static/wavedrom.skin.js"></script>
        <script src="../_static/wavedrom.min.js"></script>
        <script src="../_static/js/wavedrom.min.js?v=db79c4d1"></script>
        <script src="../_static/js/wavedrom.skin.js?v=986d6b75"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Language Guide" href="../language/index.html" />
    <link rel="prev" title="Tutorials" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Torii-HDL
          </a>
              <div class="version">
                0.1.dev1+g27926b1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#the-torii-language">The Torii language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#the-torii-standard-library">The Torii standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#the-torii-simulator">The Torii simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#the-torii-build-system">The Torii build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#fpga-toolchain-integration">FPGA toolchain integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#development-board-definitions">Development board definitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#system-requirements">System requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#installing-prerequisites">Installing Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-python">Installing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-yosys-and-gtkwave">Installing Yosys and GTKWave</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#installing-torii">Installing Torii</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#latest-release">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#development-snapshot">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#editable-development-snapshot">Editable development snapshot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#installing-board-definitions">Installing board definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#id1">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#id2">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#id3">Editable development snapshot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#a-counter">A counter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started.html#implementing-a-counter">Implementing a counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started.html#testing-a-counter">Testing a counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started.html#converting-a-counter">Converting a counter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#a-blinking-led">A blinking LED</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Including External non-Torii Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#torii-instance">Torii <code class="docutils literal notranslate"><span class="pre">Instance</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#including-external-sources">Including External Sources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/index.html">Language Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#the-prelude">The prelude</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#values">Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#constants">Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#shapes">Shapes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#shapes-of-values">Shapes of values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#shape-casting">Shape casting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#shapes-from-integers">Shapes from integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#shapes-from-ranges">Shapes from ranges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#shapes-from-enumerations">Shapes from enumerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#value-casting">Value casting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#values-from-integers">Values from integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#values-from-enumeration-members">Values from enumeration members</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#signals">Signals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#signal-shapes">Signal shapes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#signal-names">Signal names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#initial-signal-values">Initial signal values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#reset-less-signals">Reset-less signals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#operators">Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#performing-or-describing-computations">Performing or describing computations?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#width-extension">Width extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#arithmetic-operators">Arithmetic operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#comparison-operators">Comparison operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#bitwise-shift-and-rotate-operators">Bitwise, shift, and rotate operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#reduction-operators">Reduction operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#logical-operators">Logical operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#bit-sequence-operators">Bit sequence operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#conversion-operators">Conversion operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#choice-operator">Choice operator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/index.html#modules">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#control-domains">Control domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#assigning-to-signals">Assigning to signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#assignment-targets">Assignment targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#assignment-domains">Assignment domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#assignment-order">Assignment order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#control-structures">Control structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#active-and-inactive-assignments">Active and inactive assignments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#combinatorial-evaluation">Combinatorial evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/index.html#synchronous-evaluation">Synchronous evaluation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/backend/index.html">Torii Backends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/backend/cxxrtl.html">CXXRTL Backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/backend/cxxrtl.html#torii.back.cxxrtl.YosysError"><code class="docutils literal notranslate"><span class="pre">YosysError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/backend/rtlil.html">RTLIL Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/backend/verilog.html">Verilog Backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/backend/verilog.html#torii.back.verilog.YosysError"><code class="docutils literal notranslate"><span class="pre">YosysError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/hdl/index.html">Torii HDL Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/hdl/ast.html">Abstract Syntax Tree</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.AnyConst"><code class="docutils literal notranslate"><span class="pre">AnyConst</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.AnySeq"><code class="docutils literal notranslate"><span class="pre">AnySeq</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Array"><code class="docutils literal notranslate"><span class="pre">Array</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Cat"><code class="docutils literal notranslate"><span class="pre">Cat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.ClockSignal"><code class="docutils literal notranslate"><span class="pre">ClockSignal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Const"><code class="docutils literal notranslate"><span class="pre">Const</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Initial"><code class="docutils literal notranslate"><span class="pre">Initial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Mux"><code class="docutils literal notranslate"><span class="pre">Mux()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Repl"><code class="docutils literal notranslate"><span class="pre">Repl()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.ResetSignal"><code class="docutils literal notranslate"><span class="pre">ResetSignal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Sample"><code class="docutils literal notranslate"><span class="pre">Sample</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Shape"><code class="docutils literal notranslate"><span class="pre">Shape</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.ShapeCastable"><code class="docutils literal notranslate"><span class="pre">ShapeCastable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Signal"><code class="docutils literal notranslate"><span class="pre">Signal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.SignalDict"><code class="docutils literal notranslate"><span class="pre">SignalDict</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.SignalSet"><code class="docutils literal notranslate"><span class="pre">SignalSet</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.signed"><code class="docutils literal notranslate"><span class="pre">signed()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.unsigned"><code class="docutils literal notranslate"><span class="pre">unsigned()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.ValueCastable"><code class="docutils literal notranslate"><span class="pre">ValueCastable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.ValueDict"><code class="docutils literal notranslate"><span class="pre">ValueDict</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.ValueSet"><code class="docutils literal notranslate"><span class="pre">ValueSet</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/hdl/cd.html">Clock Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/cd.html#torii.hdl.cd.ClockDomain"><code class="docutils literal notranslate"><span class="pre">ClockDomain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/cd.html#torii.hdl.cd.DomainError"><code class="docutils literal notranslate"><span class="pre">DomainError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/hdl/dsl.html">DSL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/dsl.html#torii.hdl.dsl.SyntaxError"><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/dsl.html#torii.hdl.dsl.SyntaxWarning"><code class="docutils literal notranslate"><span class="pre">SyntaxWarning</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/hdl/ir.html">IR</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ir.html#torii.hdl.ir.DriverConflict"><code class="docutils literal notranslate"><span class="pre">DriverConflict</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ir.html#torii.hdl.ir.Instance"><code class="docutils literal notranslate"><span class="pre">Instance</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/ir.html#torii.hdl.ir.UnusedElaboratable"><code class="docutils literal notranslate"><span class="pre">UnusedElaboratable</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/hdl/mem.html">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/mem.html#torii.hdl.mem.DummyPort"><code class="docutils literal notranslate"><span class="pre">DummyPort</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/mem.html#torii.hdl.mem.Memory"><code class="docutils literal notranslate"><span class="pre">Memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/mem.html#torii.hdl.mem.ReadPort"><code class="docutils literal notranslate"><span class="pre">ReadPort</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/mem.html#torii.hdl.mem.WritePort"><code class="docutils literal notranslate"><span class="pre">WritePort</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/hdl/rec.html">Records</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/rec.html#torii.hdl.rec.Direction"><code class="docutils literal notranslate"><span class="pre">Direction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/hdl/rec.html#torii.hdl.rec.Record"><code class="docutils literal notranslate"><span class="pre">Record</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/hdl/xfrm.html">XFRM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library/index.html">Standard Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../library/coding/index.html">Code Conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/coding/index.html#one-hot-coding">One-hot coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/coding/index.html#torii.lib.coding.Encoder"><code class="docutils literal notranslate"><span class="pre">Encoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/coding/index.html#torii.lib.coding.Decoder"><code class="docutils literal notranslate"><span class="pre">Decoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../library/coding/index.html#priority-coding">Priority coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/coding/index.html#torii.lib.coding.PriorityEncoder"><code class="docutils literal notranslate"><span class="pre">PriorityEncoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/coding/index.html#torii.lib.coding.PriorityDecoder"><code class="docutils literal notranslate"><span class="pre">PriorityDecoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../library/coding/index.html#gray-coding">Gray coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/coding/index.html#torii.lib.coding.GrayEncoder"><code class="docutils literal notranslate"><span class="pre">GrayEncoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/coding/index.html#torii.lib.coding.GrayDecoder"><code class="docutils literal notranslate"><span class="pre">GrayDecoder</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library/cdc.html">Clock Domain Crossing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/cdc.html#torii.lib.cdc.FFSynchronizer"><code class="docutils literal notranslate"><span class="pre">FFSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/cdc.html#torii.lib.cdc.AsyncFFSynchronizer"><code class="docutils literal notranslate"><span class="pre">AsyncFFSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/cdc.html#torii.lib.cdc.ResetSynchronizer"><code class="docutils literal notranslate"><span class="pre">ResetSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/cdc.html#torii.lib.cdc.PulseSynchronizer"><code class="docutils literal notranslate"><span class="pre">PulseSynchronizer</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library/fifo.html">First-in First-out Queues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/fifo.html#torii.lib.fifo.FIFOInterface"><code class="docutils literal notranslate"><span class="pre">FIFOInterface</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/fifo.html#torii.lib.fifo.SyncFIFO"><code class="docutils literal notranslate"><span class="pre">SyncFIFO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/fifo.html#torii.lib.fifo.SyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">SyncFIFOBuffered</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/fifo.html#torii.lib.fifo.AsyncFIFO"><code class="docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/fifo.html#torii.lib.fifo.AsyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">AsyncFIFOBuffered</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library/soc/index.html">System on Chip</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/soc/event.html">Events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/event.html#torii.lib.soc.event.Source"><code class="docutils literal notranslate"><span class="pre">Source</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/event.html#torii.lib.soc.event.EventMap"><code class="docutils literal notranslate"><span class="pre">EventMap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/event.html#torii.lib.soc.event.Monitor"><code class="docutils literal notranslate"><span class="pre">Monitor</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../library/soc/memory.html">Memory Map</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/memory.html#torii.lib.soc.memory.ResourceInfo"><code class="docutils literal notranslate"><span class="pre">ResourceInfo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/memory.html#torii.lib.soc.memory.MemoryMap"><code class="docutils literal notranslate"><span class="pre">MemoryMap</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../library/soc/periph.html">Peripherals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/periph.html#torii.lib.soc.periph.ConstantValue"><code class="docutils literal notranslate"><span class="pre">ConstantValue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/periph.html#torii.lib.soc.periph.ConstantBool"><code class="docutils literal notranslate"><span class="pre">ConstantBool</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/periph.html#torii.lib.soc.periph.ConstantInt"><code class="docutils literal notranslate"><span class="pre">ConstantInt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/periph.html#torii.lib.soc.periph.ConstantMap"><code class="docutils literal notranslate"><span class="pre">ConstantMap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/periph.html#torii.lib.soc.periph.PeripheralInfo"><code class="docutils literal notranslate"><span class="pre">PeripheralInfo</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../library/soc/csr/index.html">CSRs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/csr/index.html#bus">Bus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/csr/index.html#events">Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/csr/index.html#wishbone">Wishbone</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../library/soc/wishbone/index.html">Wishbone Bus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.CycleType"><code class="docutils literal notranslate"><span class="pre">CycleType</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.BurstTypeExt"><code class="docutils literal notranslate"><span class="pre">BurstTypeExt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.Interface"><code class="docutils literal notranslate"><span class="pre">Interface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.Decoder"><code class="docutils literal notranslate"><span class="pre">Decoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.Arbiter"><code class="docutils literal notranslate"><span class="pre">Arbiter</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library/stdio/index.html">Industry Standard I/O</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/stdio/index.html#serial-i-o">Serial I/O</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/stdio/index.html#torii.lib.stdio.serial.AsyncSerialRX"><code class="docutils literal notranslate"><span class="pre">AsyncSerialRX</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/stdio/index.html#torii.lib.stdio.serial.AsyncSerialTX"><code class="docutils literal notranslate"><span class="pre">AsyncSerialTX</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../library/stdio/index.html#torii.lib.stdio.serial.AsyncSerial"><code class="docutils literal notranslate"><span class="pre">AsyncSerial</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library/vendor/index.html">FPGA Vendor Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/vendor/lattice/index.html">Lattice FPGA Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../library/vendor/lattice/index.html#ice40-blocks">iCE40 Blocks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../library/vendor/xilinx/index.html">Xilinx FPGA Modules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../platforms/fpga/index.html">Torii FPGA Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../platforms/fpga/gowin.html">Intel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/gowin.html#torii.platform.vendor.gowin.GowinPlatform"><code class="docutils literal notranslate"><span class="pre">GowinPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/fpga/altera.html">Intel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/altera.html#torii.platform.vendor.altera.AlteraPlatform"><code class="docutils literal notranslate"><span class="pre">AlteraPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/fpga/lattice-ecp5.html">Lattice ECP5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/lattice-ecp5.html#torii.platform.vendor.lattice.ecp5.ECP5Platform"><code class="docutils literal notranslate"><span class="pre">ECP5Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/fpga/lattice-ice40.html">Lattice iCE40</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/lattice-ice40.html#torii.platform.vendor.lattice.ice40.ICE40Platform"><code class="docutils literal notranslate"><span class="pre">ICE40Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/fpga/lattice-machxo-2-3l.html">Lattice MachXO2 and MachXO3L</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice.machxo_2_3l.MachXO2Platform"><code class="docutils literal notranslate"><span class="pre">MachXO2Platform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice.machxo_2_3l.MachXO3LPlatform"><code class="docutils literal notranslate"><span class="pre">MachXO3LPlatform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice.machxo_2_3l.MachXO2Or3LPlatform"><code class="docutils literal notranslate"><span class="pre">MachXO2Or3LPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/fpga/quicklogic.html">Quicklogic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/quicklogic.html#torii.platform.vendor.quicklogic.QuicklogicPlatform"><code class="docutils literal notranslate"><span class="pre">QuicklogicPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../platforms/fpga/xilinx.html">Xilinx</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../platforms/fpga/xilinx.html#torii.platform.vendor.xilinx.XilinxPlatform"><code class="docutils literal notranslate"><span class="pre">XilinxPlatform</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sim/index.html">Simulation Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#unreleased">Unreleased</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#deprecated">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id1">0.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id2">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id3">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id4">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id5">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id6">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id7">0.4.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id8">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id9">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id10">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id11">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id12">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id13">0.4.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id14">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id15">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id16">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id17">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id18">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id19">0.4.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id20">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id21">0.4.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id22">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id23">0.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id24">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id25">0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id26">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id27">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id28">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id29">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id30">0.1.0 - 0.3.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">Projects Using Torii</a></li>
<li class="toctree-l1"><a class="reference external" href="https://shrine-maiden-heavy-industries.github.io/torii-boards/">Torii Boards</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/shrine-maiden-heavy-industries/torii-hdl/">Source Code</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Torii-HDL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Tutorials</a></li>
      <li class="breadcrumb-item active">Including External non-Torii Modules</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/shrine-maiden-heavy-industries/torii-hdl/blob/main/docs/tutorials/external_modules.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="including-external-non-torii-modules">
<h1>Including External non-Torii Modules<a class="headerlink" href="#including-external-non-torii-modules" title="Link to this heading"></a></h1>
<p>Occasionally it is desired to include modules that are written in something like <a class="reference external" href="https://ieeexplore.ieee.org/document/1620780">Verilog</a>, <a class="reference external" href="https://ieeexplore.ieee.org/document/8299595">SystemVerilog</a>, or <a class="reference external" href="https://ieeexplore.ieee.org/document/8938196">VHDL</a> in a Torii based design. This is most commonly needed for things like external [IP] from other sources such as FPGA primitives or designed generated from another HDL such as <a class="reference external" href="https://clash-lang.org/">Clash</a>, <a class="reference external" href="https://github.com/SpinalHDL/SpinalHDL">SpinalHDL</a>, or <a class="reference external" href="https://www.chisel-lang.org/">Chisel</a>, as they are not directly interoperable with Torii.</p>
<p>Luckily, this is fairly easy to do with the Torii <a class="reference internal" href="../api/hdl/ir.html#torii.hdl.ir.Instance" title="torii.hdl.ir.Instance"><code class="xref py py-class docutils literal notranslate"><span class="pre">torii.hdl.ir.Instance</span></code></a>, it allows you to construct an instance of an arbitrary module, defining all of the inputs, outputs, and properties.</p>
<section id="torii-instance">
<h2>Torii <code class="docutils literal notranslate"><span class="pre">Instance</span></code><a class="headerlink" href="#torii-instance" title="Link to this heading"></a></h2>
<p>A Torii instance takes the name of the module or primitive you wish to instantiate, and lets you define the parameters, ports, and attributes, most of which can be directly hooked up with other Torii types such as <a class="reference internal" href="../api/hdl/ast.html#torii.hdl.ast.Signal" title="torii.hdl.ast.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">torii.hdl.ast.Signal</span></code></a>.</p>
<p>An example of an <code class="docutils literal notranslate"><span class="pre">Instance</span></code> that instantiates a module called <code class="docutils literal notranslate"><span class="pre">MyInverter</span></code> (who’s implementation is not important) which has 1 input port named <code class="docutils literal notranslate"><span class="pre">src</span></code> and 1 output port named <code class="docutils literal notranslate"><span class="pre">dst</span></code> would be as follows.</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span>
<span class="n">Instance</span><span class="p">(</span>
	<span class="s1">&#39;MyInverter&#39;</span><span class="p">,</span>
	<span class="n">i_src</span> <span class="o">=</span> <span class="n">input_signal</span><span class="p">,</span>
	<span class="n">o_dst</span> <span class="o">=</span> <span class="n">output_signal</span>
<span class="p">)</span>

</pre></div>
</div>
<p>The prefix on the front of the port name is important, as it tells Torii what that parameter of the instance is, and the port name itself must match the port name of the module or cell you’re instantiating. The accepted prefixes and corresponding types are listed in the table below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Prefix</p></th>
<th class="head"><p>Corresponding Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">a_</span></code></p></td>
<td><p>Attribute</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">p_</span></code></p></td>
<td><p>Parameter</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">i_</span></code></p></td>
<td><p>Input Port/Signal</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">o_</span></code></p></td>
<td><p>Output Port/Signal</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">io_</span></code></p></td>
<td><p>Bi-directional Port/Signal</p></td>
</tr>
</tbody>
</table>
</section>
<section id="including-external-sources">
<h2>Including External Sources<a class="headerlink" href="#including-external-sources" title="Link to this heading"></a></h2>
<p>When you are using a generated or a raw <a class="reference external" href="https://ieeexplore.ieee.org/document/1620780">Verilog</a> module, then you need to tell torii to include it so it can properly synthesize, you do this with the <code class="xref py py-meth docutils literal notranslate"><span class="pre">torii.build.plat.Platform.add_file()</span></code> method, it takes the name and contents of a file to add to the sources collection which is then used in the synthesis step.</p>
<p>An example Torii elaboratable for a <a class="reference external" href="https://ieeexplore.ieee.org/document/1620780">Verilog</a>  module would look like this:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">torii</span> <span class="kn">import</span> <span class="n">Elaboratable</span><span class="p">,</span> <span class="n">Module</span><span class="p">,</span> <span class="n">Signal</span><span class="p">,</span> <span class="n">Instance</span>

<span class="k">class</span> <span class="nc">MyInverter</span><span class="p">(</span><span class="n">Elaboratable</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">extern_module</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;./my_inverter.v&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">elaborate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">platform</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Module</span><span class="p">:</span>
		<span class="c1"># Add the file to the platform</span>
		<span class="k">if</span> <span class="n">platform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">extern_module</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
				<span class="n">platform</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extern_module</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

		<span class="n">m</span> <span class="o">=</span> <span class="n">Module</span><span class="p">()</span>

		<span class="c1"># Add the</span>
		<span class="n">m</span><span class="o">.</span><span class="n">submodules</span> <span class="o">+=</span> <span class="n">Instance</span><span class="p">(</span>
			<span class="s1">&#39;MyInverter&#39;</span><span class="p">,</span>
			<span class="n">i_src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span>
			<span class="n">i_dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span>
		<span class="p">)</span>

		<span class="k">return</span> <span class="n">m</span>

</pre></div>
</div>
<p>It’s not necessary to pass the file in within the elaborate of the module itself, however keeping the wrapper elaboratable coupled to the dependant HDL source file is recommended.</p>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../language/index.html" class="btn btn-neutral float-right" title="Language Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shrine Maiden Heavy Industries.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>